language: java
jdk:
  - openjdk11
cache:
  directories:
  - "$HOME/.m2/repository"
branches:
  only:
  - master
  - "/^iterator-type-matchers-[0-9]+\\.[0-9]+\\.[0-9]+/"
after_success:
- mvn clean test jacoco:report coveralls:report
- test "${TRAVIS_PULL_REQUEST}" == "false" && test "${TRAVIS_TAG}" != "" && mvn deploy --settings settings.xml
env:
  global:
  - secure: i+DjT2hJg2qYeQsgUM5D/v0oagsLxm0aNQ4NW+RlxuneSREmSZdQP7oxaAvti+ZopgHSIFO+Sf3jdRZv/Yj9Py5xsXC8huBJLAHQ30p0fQx/cXi9Nfv6yakO+Uhxp/qrcOvu0etWjCXtHVPMlrTsoT6tLN+0S2suP/VjggdSRrVZdAk+KXG5OOiNPoy88JBu1w9YR5Q6S+QuLCDQFdDiO73/5VPIeCnWBIF1Xx3EjOojFmr8Ehox9ADUmri1x38iEOodQXt+1LcIJi69NuORkhyFOZlyZxb96rPHof0SYAGl/jw0PRzT9bgSdH9NkPeyqWxoRkzMLU5vnakBAMDYNbrypv7V+/3METhAKUmxBoPjm4JqtNTxunsaZAjPrX5yaXanZqxHuG4/qsl9KtzUDP9HL7Duq8Nmlu8iOPAM1rKHJ31Ssqrd0RaNoFbxy1FNOR4bWMwx1ku7C3yIHQpmqSriUpX1iZ2O5SzkGZ9DUxZPvs71xsV/9thY+tz1bUaJTDhhWELKT04o74MW0QFXipoDgZbd4DjxA3yOpIxskDozKzDPBDjzh4IRbENPfSM7khCEswQiJClg3jl+n7fhp5/WLr7j5dWIUA9Ht4I49dXW7fEWpMqX3p9hlPcD31sRVa8TrKpE6oUghn4EJ1c82siL3LIxRk13dyqEXuYC2O8=
  - secure: Lqk/gkJO+uaastjSbbP8YeO46exu4J3sujkgfsl7o1lsFDtpoDbxM++2OeR+In5CjmskAWGMG0lxz7jZrijTNmVs8Y74JsRDw1ESvzg6r1za6JqN7lUiYsroNm9zhgXAtZyiPAZ+E7LuQoTunNNOiPH50YsUVAsl2qaHqdE948JfTFdTUustFc+OsmPhq0SqPymZk15OCiIjn6K7klBb0E41BwDWDZDGKTq0wIVeZU8zp5NWubKcYmnPNBq8xnar91mLrfl1Z5bbNk740nFWNy/mwNi5brWV+lwYmbvf1lijqbAZeqS1SA+2zdnAwBEL9XdPMYzgr/uokJPH8/ZC8YoYeZ6xF2HUNx+Y41q6guL1ns6HjvkVKam34wKrQqeqfxQ0Tr3cphxcNhiCucZW8++4gUQvGIfLZQ6AvmGy5A44w8852ByT/3/eKH24t+Pb11Euw7jJMEi5rC6dQonssKa6nVE+2C7H930AY2ukHXcV6Gb+A5x2CFCO1odPyhiiwcIaUkct/FISY4DJCRSPgKZOXm7kEbB0WcnJ7PtxndKkSpCUw596KqEu5HZGctfK08jJBMZ0SPIGSgQnQSvmT18SFoIPAyX8ZzmToagBFlecSOtxmcLFa7kTwncmWf4TyD1da90fGhpscksrE0HmJeYKaQ6U4bii+JtLirq6a7g=
  - secure: dawPp/pCZ7z7u25LC0pbp3YVMJoQsRWkN8PuYmMaKJz+D9nToFPmwix2qvwD7m8zTRF6O3bw0PO0y08BreBjSN99XJzI4SvMlrjuJS5qsR/38THMWvhdbNgr3eFnLf65FI4dn7EaAD4+vzlsChA0L7+F+9IjPEALf9LFfuthnjQZh09O+z9Y//8817fXRHF6yyFxjsrtzMw2RZJAaG83wqRHTW/cSTvIsYJxu7CkY7AK4EkU/idlebGgMZt+7YPsA6wIksE1q1FWlqdrgFVnV2UbXq3g0ck/dRlxCX1oJsL9XQWzUwPxu2bu1WG/rHdFqVkdLHAk3o+72H7+V0rgjGtftt01i6OFktYCr8LLw4ku5ahT5ZxaMT0KOilhMZIfgbl4kYGyIqTfB4dK9opJXZtpJLI1/W2fPrRrNYdZlR8NLGLPME3mkoNFA1DnOZnZpYLZ6W1rF/LKOELc34lgMW4p9F+GVrtAWRLOv+9yKbnYlR9QY+6zq01E8dCc4tm0r8VWyWu0j8MRAPdYJNCSdyv0xUHL5a6/AL4IyEFL8RJzchfcv8Z57Z4XcfalrHRp0/ELMJr+Wd6aVrH3OWuHdHoKP0J9c2YebqZsn6R+cAOiGUk1ma0gQ9A4XEkLjqAPD2ZpC4XxeVnBnXXgO6fSFvrNEJLEefRp+72AxFh7aDs=
addons:
  sonarcloud:
    organization: "iteratoruk"
    token:
      secure: "CjNNimDFEOzfFYmTFvTtTtKTv8qO9SxB9Qvae8uVihNkwGggUtKaS5oKuTTRdN7tWnhovZfeYsTIrQ0m/LmzHBcDcb+XKbPIQo8vGDfKqTELLt24vhGdTz8hdothiUQujueB0Vma/htQuZLHa8d2CnOqFOSbByNhqgUkR9ewFDGbw7lqAZLtxqSyVoSz90nwbhy3U9Bofo4eB2dNqSBDsuxYKjkTv8HlHRiivohgWUHxjxYKQYYtkWeD070C2rGuYgzQAmWcs6RcHsFi5SclWbq/cwQT+frJcbad/DRvOZxB671+rhNJvpZmnp0NuRwVszPtj7Caw20eIXNg9SA3I0D0ZADrSURHY8lXBKyVB3LtZUF9qwi7/4xyJjxcdh6/cCcQHQ/k76R8Ieqf+r9XHrLL/fLyhv53o7VFq5yAQPgHI22TEo8eE0BurOa7zUXzXNBIRhhm0kX7wmDfU2J98RVLgIIla+plg29sDL9yfg+aMHQyuRZFLwe/4bN2gK0AFijSMwBFJwWfCOOoMkhUte8IyfZlisV02Fn47rppsq3WpEHs7NBe/fd5GHZ6WeLuHpzh+jGau60quf95wkD+iNkPovOyru5B6eCOFtsh79PULw0C4nPTCaJ+fX8kZM82HjKkeF8meI3ZO9k6KLjPtiWMgQALtuPs/qsQj7sRJk0="
script:
  - mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent install sonar:sonar -Dsonar.projectKey=iteratoruk_iterator-type-matchers